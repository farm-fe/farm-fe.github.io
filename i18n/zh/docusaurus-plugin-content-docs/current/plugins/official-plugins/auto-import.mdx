import CodeBlock from "@theme/CodeBlock";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# @farmfe/plugin-auto-import

æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥ç¬¬ä¸‰æ–¹åº“çš„æ–¹æ³•

## å®‰è£…


<Tabs>
  <TabItem value="npm" label="npm">
    <CodeBlock>npm install @farmfe/plugin-auto-import</CodeBlock>
  </TabItem>
  <TabItem value="yarn" label="yarn">
    <CodeBlock>yarn add @farmfe/plugin-auto-import</CodeBlock>
  </TabItem>
  <TabItem value="pnpm" label="pnpm">
    <CodeBlock>pnpm add @farmfe/plugin-auto-import</CodeBlock>
  </TabItem>
    <TabItem value="bun" label="bun">
    <CodeBlock>bun add @farmfe/plugin-auto-import</CodeBlock>
  </TabItem>
</Tabs>

## ä½¿ç”¨

`@farmfe/plugin-auto-import` æ˜¯ä¸€ä¸ªRustæ’ä»¶,åªéœ€è¦åœ¨ `farm.config.(t|j|mj)s` çš„çš„ `plugins` å­—æ®µä¸­é…ç½®å…¶åŒ…åå³å¯ã€‚

```ts {4}
import { UserConfig } from '@farmfe/core';
import AutoImport from '@farmfe/plugin-auto-import'

const config: UserConfig = {
  plugins: [
    AutoImport({
       /** é€‰é¡¹åœ¨æ­¤ */
    })
  ]
}
```
## åŠŸèƒ½

- ğŸ’š æ”¯æŒReactå’ŒReact-Routerå¼€ç®±å³ç”¨
- ğŸ æ ‘æ‘‡ï¼ˆTree-shakingï¼‰ï¼Œä»…æ³¨å†Œå®é™…ä½¿ç”¨çš„ç»„ä»¶ï¼Œå‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚
- ğŸª æ–‡ä»¶å¤¹åç§°ä½œä¸ºå‘½åç©ºé—´ã€‚
- ğŸ¦¾ å®Œæ•´çš„TypeScriptæ”¯æŒã€‚

## ä½¿ç”¨

å’Œ `unplugin-auto-import`æ’ä»¶ä¸€æ ·çš„ç”¨æ³•, è‡ªåŠ¨å¼•å…¥ç»„ä»¶ ä¸å†éœ€è¦ `import`

ä»–ä¼šè‡ªåŠ¨å°†è¿™ä¸ª

```tsx
export function Main() {
  const [ops, setOps] = useState([])

  return (<div>
    {
      ops.map(k => (<span key={`k`}>{k}</span>))
    }
  </div>)
}
```

è½¬åŒ–æˆè¿™ä¸ª

```tsx
import {useState} from "react"
export function Main() {
  const [ops, setOps] = useState([])

  return (<div>
    {
      ops.map(k => (<span key={`k`}>{k}</span>))
    }
  </div>)
}

```
:::warning

1.æš‚ä¸æ”¯æŒç»„ä»¶ï¼šç›®å‰ä»…æ”¯æŒå‡½æ•° API çš„è‡ªåŠ¨å¯¼å…¥ï¼Œç»„ä»¶æš‚ä¸å—æ”¯æŒã€‚

2.çƒ­æ›´æ–°é™åˆ¶ï¼šå¦‚æœåœ¨ `farm.config.(t|j|mj|cj)s` ä¸­ä¿®æ”¹äº†æ’ä»¶é…ç½®ï¼Œè¯·é‡å¯ `farm server`ã€‚
:::

## TypeScript

ä¸ºè‡ªåŠ¨å¯¼å…¥çš„ç»„ä»¶è·å¾—TypeScriptæ”¯æŒã€‚

```ts
AutoImport({
  dts: true, // å¦‚æœå®‰è£…äº†`typescript`é»˜è®¤å¯ç”¨
})
```

å®Œæˆè®¾ç½®åï¼Œå°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª`auto-import.d.ts`æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ç±»å‹å®šä¹‰ã€‚ä½ å¯ä»¥é€‰æ‹©æ˜¯å¦å°†å…¶æäº¤åˆ°gitã€‚

> **ç¡®ä¿ä½ ä¹Ÿå°†`auto-import.d.ts`æ·»åŠ åˆ°`tsconfig.json`çš„`include`ä¸­ã€‚**

:::tip
åœ¨ `JavaScript` é¡¹ç›®ä¸­ï¼Œå¦‚æœæ˜¯ç”¨æ¥è¯¥æ’ä»¶å¹¶ä¸”æƒ³è·å–å®Œæ•´çš„å‡½æ•°ç±»å‹æç¤º éœ€è¦é…ç½® `jsconfig.json`æ–‡ä»¶
:::

å¯¹äº JavaScript é¡¹ç›®ï¼Œå¦‚æœéœ€è¦å®Œæ•´çš„å‡½æ•°ç±»å‹æç¤ºï¼Œå¯ä»¥é…ç½® jsconfig.json æ–‡ä»¶ï¼š

```js
{
  "compilerOptions": {
    "checkJs": false,
    "baseUrl": "./src",
    "paths": {
      "@/*": ["*"]
    },
    "typeRoots": ["auto-import.d.ts"]
  }
}
```

## ç¬¬ä¸‰æ–¹åº“æ”¯æŒ
```ts
{
  "react", // é»˜è®¤é…ç½®
  "react-router", // é»˜è®¤é…ç½®
  {
    from: "lodash-es", // è‡ªåŠ¨å¯¼å…¥ lodash-es æ¨¡å—ä¸­çš„å‡½æ•°
    imports: [
      "debounce",
      "throttle",
      "isEqual",
      "isEmpty",
      "isNil",
      "isFunction",
      "isObject",
      "isArray",
      "isString",
      "isNumber",
      "isBoolean",
      "isDate",
      "isRegExp",
      "isSymbol",
      "isMap",
      "isSet",
      "isWeakMap",
      "isWeakSet",
    ],
  },
}
```


## é…ç½®
ä»¥ä¸‹æ˜¾ç¤ºäº†é…ç½®çš„é»˜è®¤å€¼
```ts
{

  // ç”Ÿæˆå…¨å±€å£°æ˜çš„`auto-import.d.ts`ï¼Œ
  // ä¹Ÿæ¥å—è‡ªå®šä¹‰æ–‡ä»¶åçš„è·¯å¾„
  // é»˜è®¤ï¼šå¦‚æœå®‰è£…äº†typescriptåŒ…åˆ™ä¸º`true`
  dts: true,

  // è½¬æ¢ç›®æ ‡ï¼ˆè¦æ’å…¥è‡ªåŠ¨å¯¼å…¥çš„ç»„ä»¶ï¼‰çš„è¿‡æ»¤å™¨
  // æ³¨æ„ï¼Œè¿™ä¸æ˜¯å…³äºåŒ…å«/æ’é™¤æ³¨å†Œç»„ä»¶ - ä½¿ç”¨`Regex`æ¥åšé‚£ä¸ª
  include: ["src/components"],// åŒ…å«çš„ç›®å½•
  exclude: ["node_modules"], // æ’é™¤çš„ç›®å½•
   // è‡ªåŠ¨æ‰«æçš„ç›®å½•
  dirs: ['src/hooks', 'src/components'],
  // éœ€è¦è‡ªåŠ¨å¯¼å…¥çš„æ¨¡å—
  presets: [
    "react", // é»˜è®¤é…ç½®
    "react-router", // é»˜è®¤é…ç½®
  ]
}


```
å½“å‰é»˜è®¤é…ç½®æœ‰`presets`: `["pinia", "react", "react-router", "vue", "vue-router"]`, æ›´å¤šè¯¦æƒ…å¯å‚è€ƒ[æºç ä»“åº“](https://github.com/farm-fe/plugins/blob/main/rust-plugins/auto-import/src/presets/mod.rs)

å¦‚éœ€æŸ¥çœ‹å®Œæ•´ç±»å‹å®šä¹‰ï¼Œè¯·å‚è€ƒ[æºç é…ç½®](https://github.com/farm-fe/plugins/blob/main/rust-plugins/auto-import/options.d.ts)

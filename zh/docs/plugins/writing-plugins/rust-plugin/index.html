<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-plugins/writing-plugins/rust-plugin" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">ç¼–å†™ Rust æ’ä»¶ | Farm</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://farmfe.org/zh/img/farm-social-card.png"><meta data-rh="true" name="twitter:image" content="https://farmfe.org/zh/img/farm-social-card.png"><meta data-rh="true" property="og:url" content="https://farmfe.org/zh/docs/plugins/writing-plugins/rust-plugin"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ç¼–å†™ Rust æ’ä»¶ | Farm"><meta data-rh="true" name="description" content="ç”¨ Rust å†™ä½ çš„æ’ä»¶æ˜¯ä¸€ä¸ªæ¨èçš„æ–¹å¼ï¼Œå› ä¸º Rust æ’ä»¶æ¯” JavaScript æ’ä»¶æ›´å¿«å’Œå¯Œæœ‰è¡¨ç°åŠ›ã€‚ä¸€ä¸ª Rust æ’ä»¶åº”è¯¥æ˜¯å®ç°äº† farmfe_core::Plugin trait çš„ struct, ä¾‹å¦‚"><meta data-rh="true" property="og:description" content="ç”¨ Rust å†™ä½ çš„æ’ä»¶æ˜¯ä¸€ä¸ªæ¨èçš„æ–¹å¼ï¼Œå› ä¸º Rust æ’ä»¶æ¯” JavaScript æ’ä»¶æ›´å¿«å’Œå¯Œæœ‰è¡¨ç°åŠ›ã€‚ä¸€ä¸ª Rust æ’ä»¶åº”è¯¥æ˜¯å®ç°äº† farmfe_core::Plugin trait çš„ struct, ä¾‹å¦‚"><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://farmfe.org/zh/docs/plugins/writing-plugins/rust-plugin"><link data-rh="true" rel="alternate" href="https://farmfe.org/docs/plugins/writing-plugins/rust-plugin" hreflang="en"><link data-rh="true" rel="alternate" href="https://farmfe.org/zh/docs/plugins/writing-plugins/rust-plugin" hreflang="zh"><link data-rh="true" rel="alternate" href="https://farmfe.org/docs/plugins/writing-plugins/rust-plugin" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://G3J92PUFY2-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="Farm RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="Farm Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Farm" href="/zh/opensearch.xml"><link rel="stylesheet" href="/zh/assets/css/styles.4abb6b25.css">
<script src="/zh/assets/js/runtime~main.dc5f596a.js" defer="defer"></script>
<script src="/zh/assets/js/main.142b75ff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_IFS2" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_zV3U" role="banner"><div class="announcementBarPlaceholder_BaE1"></div><div class="content_Tvx2 announcementBarContent_FdcX">ğŸ‰ Farm is now in 1.0.0 stable and production ready. If you like Farm, give it a â­ï¸ on <a target="_blank" rel="noopener noreferrer" href="https://github.com/farm-fe/farm">GitHub</a></div><button type="button" aria-label="å…³é—­" class="clean-btn close closeButton_QI_l announcementBarClose_NfjT"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/logo.png" alt="My Site Logo" class="themedComponent_xQWO themedComponent--light_Flgq"><img src="/zh/img/logo.png" alt="My Site Logo" class="themedComponent_xQWO themedComponent--dark_Lh1h"></div><b class="navbar__title text--truncate">Farm</b></a><button position="left" style="margin-right:2rem;margin-left:2rem;margin-top:0.3rem;width:8rem" class="documate-button" aria-label="Ask AI" data-v-956ba6e9="true"><svg class="icon" viewBox="0 0 12 14" fill="currentColor" data-v-956ba6e9="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.61655 13.3474C6.69072 13.3474 6.75047 13.3232 6.7958 13.2749C6.84525 13.2306 6.87616 13.1721 6.88852 13.0996C6.97094 12.4628 7.0616 11.9269 7.1605 11.4916C7.26352 11.0564 7.39951 10.6997 7.56847 10.4216C7.73742 10.1435 7.96202 9.92194 8.24223 9.75671C8.52245 9.59147 8.88099 9.46454 9.31782 9.37581C9.7587 9.28313 10.2986 9.20257 10.9373 9.13407C11.0156 9.12598 11.0774 9.09776 11.1227 9.04939C11.1722 9.00103 11.1969 8.94061 11.1969 8.86806C11.1969 8.79552 11.1722 8.7351 11.1227 8.68674C11.0774 8.63837 11.0156 8.61015 10.9373 8.60206C10.2986 8.53356 9.7587 8.45498 9.31782 8.36634C8.88099 8.27366 8.52245 8.1447 8.24223 7.97946C7.96202 7.81424 7.73742 7.59259 7.56847 7.31452C7.39951 7.03646 7.26352 6.6798 7.1605 6.24456C7.0616 5.80932 6.97094 5.27132 6.88852 4.63056C6.87616 4.56205 6.84525 4.50563 6.7958 4.4613C6.75047 4.41293 6.69072 4.38876 6.61655 4.38876C6.54237 4.38876 6.48056 4.41293 6.4311 4.4613C6.38578 4.50563 6.35693 4.56205 6.34456 4.63056C6.26627 5.27132 6.17561 5.80932 6.07259 6.24456C5.97369 6.6798 5.8377 7.03646 5.66462 7.31452C5.49566 7.59259 5.27108 7.81424 4.99086 7.97946C4.71064 8.1447 4.35212 8.27366 3.91531 8.36634C3.4785 8.45498 2.93866 8.53356 2.2958 8.60206C2.21751 8.61015 2.15363 8.63837 2.10418 8.68674C2.05473 8.7351 2.03001 8.79552 2.03001 8.86806C2.03001 8.94061 2.05473 9.00103 2.10418 9.04939C2.15363 9.09776 2.21751 9.12598 2.2958 9.13407C2.93454 9.21462 3.47231 9.30533 3.90913 9.4061C4.34594 9.50283 4.70239 9.63175 4.97849 9.79294C5.25871 9.95413 5.48331 10.1718 5.65226 10.4458C5.82122 10.7158 5.95721 11.0664 6.06023 11.4976C6.16325 11.9288 6.25802 12.4628 6.34456 13.0996C6.35693 13.1721 6.38578 13.2306 6.4311 13.2749C6.48056 13.3232 6.54237 13.3474 6.61655 13.3474ZM2.65431 7.00622C2.70377 7.00622 2.74498 6.9901 2.77795 6.95787C2.81091 6.92563 2.82945 6.88734 2.83358 6.84301C2.88714 6.46016 2.94072 6.16396 2.99429 5.9544C3.04786 5.74081 3.13234 5.58163 3.24773 5.47685C3.36311 5.36804 3.53412 5.28341 3.76078 5.22296C3.98742 5.16251 4.30267 5.094 4.70652 5.01744C4.81366 5.00131 4.86723 4.94287 4.86723 4.84212C4.86723 4.79377 4.85074 4.75548 4.81778 4.72727C4.78893 4.69503 4.75185 4.67489 4.70652 4.66682C4.30267 4.6104 3.98536 4.556 3.7546 4.50361C3.52794 4.44719 3.35693 4.36458 3.24155 4.25576C3.13028 4.14293 3.04786 3.9777 2.99429 3.76008C2.94072 3.53843 2.88714 3.23417 2.83358 2.84729C2.82122 2.73848 2.76146 2.68408 2.65431 2.68408C2.54717 2.68408 2.48536 2.7405 2.46888 2.85334C2.42355 3.23215 2.3741 3.52836 2.32053 3.74195C2.26696 3.95553 2.18248 4.11673 2.06709 4.22554C1.95171 4.33032 1.77863 4.41293 1.54786 4.47339C1.32121 4.52981 1.00597 4.59428 0.602121 4.66682C0.494978 4.68698 0.441406 4.74541 0.441406 4.84212C0.441406 4.94287 0.503219 5.00131 0.626846 5.01744C1.02245 5.08594 1.33357 5.14841 1.56023 5.20483C1.791 5.26125 1.96201 5.34386 2.07328 5.45267C2.18454 5.56148 2.26696 5.72469 2.32053 5.94231C2.3741 6.1559 2.42355 6.45412 2.46888 6.83697C2.48536 6.9498 2.54717 7.00622 2.65431 7.00622ZM5.49773 3.08909C5.56366 3.08909 5.60487 3.05281 5.62135 2.98028C5.67493 2.67803 5.72643 2.45638 5.77589 2.31533C5.82534 2.17025 5.92217 2.06749 6.0664 2.00704C6.21064 1.94659 6.45377 1.88815 6.7958 1.83173C6.86998 1.81561 6.90707 1.77531 6.90707 1.71084C6.90707 1.6383 6.86998 1.598 6.7958 1.58993C6.45377 1.52949 6.21064 1.47105 6.0664 1.41463C5.92217 1.35418 5.82534 1.25343 5.77589 1.11238C5.72643 0.967306 5.67493 0.741626 5.62135 0.435348C5.60487 0.362808 5.56366 0.326538 5.49773 0.326538C5.42355 0.326538 5.38234 0.362808 5.3741 0.435348C5.31641 0.741626 5.26283 0.967306 5.21338 1.11238C5.16806 1.25343 5.07121 1.35418 4.92286 1.41463C4.77863 1.47105 4.5355 1.52949 4.19347 1.58993C4.11929 1.598 4.0822 1.6383 4.0822 1.71084C4.0822 1.77531 4.11929 1.81561 4.19347 1.83173C4.5355 1.88815 4.77863 1.94659 4.92286 2.00704C5.07121 2.06749 5.16806 2.17025 5.21338 2.31533C5.26283 2.45638 5.31641 2.67803 5.3741 2.98028C5.38234 3.05281 5.42355 3.08909 5.49773 3.08909Z" data-v-956ba6e9="true"></path></svg><span class="button-placeholder" data-v-956ba6e9="true">Ask AI</span></button><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><a class="navbar__item navbar__link" href="/zh/docs/quick-start">æŒ‡å—</a><a class="navbar__item navbar__link" href="/zh/docs/config/configuring-farm">é…ç½®</a><a class="navbar__item navbar__link" href="/zh/docs/api/rust-plugin-api">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/plugins/official-plugins/overview">æ’ä»¶</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ç¤¾åŒº</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/team">å›¢é˜Ÿ</a></li><li><a class="dropdown__link" href="/zh/blog/index">æ—¥å¿—</a></li><li><a href="https://github.com/farm-fe/awesome-farm" target="_blank" rel="noopener noreferrer" class="dropdown__link">Awesome Farm<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://discord.com/invite/mDErq9aFnF" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://twitter.com/FarmFe71928" target="_blank" rel="noopener noreferrer" class="dropdown__link">Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/farm-fe/farm?tab=readme-ov-file#chat-with-us" target="_blank" rel="noopener noreferrer" class="dropdown__link">WeChat Group<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/docs/why-farm">1.0.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/plugins/writing-plugins/rust-plugin">1.0.0</a></li><li><a class="dropdown__link" href="/zh/docs/0.x/plugins/writing-plugins/rust-plugin">0.15</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_F1WL"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>ç®€ä½“ä¸­æ–‡</a><ul class="dropdown__menu"><li><a href="/docs/plugins/writing-plugins/rust-plugin" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/docs/plugins/writing-plugins/rust-plugin" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/farm-fe/farm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_fhLg colorModeToggle_Z6MN"><button class="clean-btn toggleButton_V4lX toggleButtonDisabled_foE0" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Vtl_"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Adrb"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Kj8a"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eJvI"><div class="docsWrapper_YABO"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_qN9v" type="button"></button><div class="docRoot_Ui2j"><aside class="theme-doc-sidebar-container docSidebarContainer_DAII"><div class="sidebarViewport_RRIt"><div class="sidebar_LJNg"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_BumF menuWithAnnouncementBar_Zs1O"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/plugins/official-plugins/overview">å®˜æ–¹æ’ä»¶</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/docs/plugins/community-plugins">ç¤¾åŒºæ’ä»¶</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/docs/plugins/writing-plugins/overview">ç¼–å†™æ’ä»¶</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/plugins/writing-plugins/overview">æ¦‚è§ˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/plugins/writing-plugins/rust-plugin">ç¼–å†™ Rust æ’ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/plugins/writing-plugins/js-plugin">ç¼–å†™ JavaScript æ’ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/plugins/writing-plugins/runtime-plugin">ç¼–å†™ Runtime æ’ä»¶</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_yjID"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DIkG"><div class="docItemContainer_g6kw"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_pWlK" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_olKi"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ç¼–å†™æ’ä»¶</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ç¼–å†™ Rust æ’ä»¶</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">ç‰ˆæœ¬ï¼š1.0.0</span><div class="tocCollapsible_Ms3v theme-doc-toc-mobile tocMobile_A0sM"><button type="button" class="clean-btn tocCollapsibleButton_qSbx">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><h1>ç¼–å†™ Rust æ’ä»¶</h1>
<p>ç”¨ Rust å†™ä½ çš„æ’ä»¶æ˜¯ä¸€ä¸ªæ¨èçš„æ–¹å¼ï¼Œå› ä¸º Rust æ’ä»¶æ¯” JavaScript æ’ä»¶<strong>æ›´å¿«å’Œå¯Œæœ‰è¡¨ç°åŠ›</strong>ã€‚ä¸€ä¸ª Rust æ’ä»¶åº”è¯¥æ˜¯å®ç°äº† <code>farmfe_core::plugin::Plugin</code> trait çš„ <code>struct</code>, ä¾‹å¦‚</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token attribute attr-name" style="color:rgb(72, 118, 214);font-style:italic">#![deny(clippy::all)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">use</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token namespace" style="color:rgb(12, 150, 155)">config</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">use</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_macro_plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token plain">farm_plugin</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// define your rust plugins</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(72, 118, 214);font-style:italic">#[farm_plugin]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:rgb(17, 17, 17)">FarmPluginExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ä¸€ä¸ª Rust æ’ä»¶å¿…é¡»å¯¼å‡ºä¸€ä¸ªåç§°æ˜¯ new çš„å‡½æ•° å¹¶ä¸”åˆå§‹åŒ–çš„æ—¶å€™æ¥å—ä¸¤ä¸ªå‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">new</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// å®ç°æ’ä»¶çš„ trait æ¥å®šä¹‰æ’ä»¶ hooks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">str</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;FarmPluginExample&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// more hooks here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Rust æ’ä»¶æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li><code>struct</code> å¿…é¡»æ˜¯ <code>pub</code> å¹¶ä¸”éœ€è¦æœ‰ <code>#[farm_plugin]</code> å±æ€§</li>
<li><code>struct</code> å¿…é¡»å®ç° <code>Plugin</code> trait, å¹¶ä¸” <code>name</code> æ–¹æ³•å¿…é¡»è¦å®ç°</li>
<li><code>struct</code> å¿…é¡»å¯¼å‡ºä¸€ä¸ª <code>new</code> çš„æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ¥å—ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>&amp;Config</code>, ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>String</code>ã€‚<code>new</code> æ–¹æ³•åœ¨æ’ä»¶åŠ è½½çš„æ—¶å€™è°ƒç”¨ã€‚ <code>Config</code> æ˜¯ farm é¡¹ç›®çš„é…ç½® <code>String</code> æ˜¯æ’ä»¶çš„é€‰é¡¹</li>
</ul>
<p>æˆ‘ä»¬åŒæ—¶æä¾›äº† Rust æ’ä»¶ç¤ºä¾‹ä»£ç ä»“åº“ï¼š<a href="https://github.com/farm-fe/rust-plugin-example" target="_blank" rel="noopener noreferrer">farm-rust-plugin-example</a></p>
<div class="theme-admonition theme-admonition-note admonition_xFJj alert alert--secondary"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å¤‡æ³¨</div><div class="admonitionContent_JEcN"><p>æœ¬æ–‡ç« ä»…ä»…æ¶µç›–å¦‚ä½•åˆ›å»ºï¼Œå¼€å‘å’Œå‘å¸ƒä¸€ä¸ª Rust æ’ä»¶ï¼Œæ›´å¤šçš„ç»†èŠ‚å‚è€ƒ <a href="/zh//docs/api/rust-plugin-api">æ’ä»¶ Hooks</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="çº¦å®š">çº¦å®š<a href="#çº¦å®š" class="hash-link" aria-label="çº¦å®šçš„ç›´æ¥é“¾æ¥" title="çº¦å®šçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å¯¹äºç‰¹å®šçš„ Farm æ’ä»¶</p>
<ul>
<li>ä¸€ä¸ª Farm çš„ Rust æ’ä»¶åº”è¯¥æœ‰ä¸€ä¸ª <code>farm-plugin-</code> å‰ç¼€çš„åç§°å¹¶ä¸”è¯­ä¹‰æ¸…æ™°</li>
<li>package.json é‡Œé¢æœ‰ <code>farm-plugin-</code> å…³é”®å­—</li>
</ul>
<p>å¦‚æœä½ çš„æ’ä»¶ä»…ä»…é€‚é…ç‰¹å®šæ¡†æ¶ï¼Œå…¶åç§°åº”éµå¾ªä»¥ä¸‹å‰ç¼€æ ¼å¼:</p>
<ul>
<li><code>farm-plugin-vue-</code>: ä½œä¸º Vue æ’ä»¶å‰ç¼€</li>
<li><code>farm-plugin-react-</code>: ä½œä¸º React æ’ä»¶å‰ç¼€</li>
<li><code>farm-plugin-svelte-</code>: ä½œä¸º Svelte æ’ä»¶å‰ç¼€</li>
<li>...</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="æ¦‚å¿µ">æ¦‚å¿µ<a href="#æ¦‚å¿µ" class="hash-link" aria-label="æ¦‚å¿µçš„ç›´æ¥é“¾æ¥" title="æ¦‚å¿µçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>åœ¨å¼€å§‹ç¼–å†™ Rust æ’ä»¶ä¹‹å‰ï¼Œä½ åº”è¯¥äº†è§£ä»¥ä¸‹æ¦‚å¿µ:</p>
<ul>
<li><strong>module_type</strong>ï¼šæ¨¡å—çš„ç±»å‹ï¼Œä»–å¯èƒ½æ˜¯ <code>js</code>, <code>ts</code>, <code>css</code>, <code>sass</code>, <code>json</code> ç­‰ç­‰ã€‚Farm åŸç”Ÿæ”¯æŒ <code>js/ts/jsx/tsx</code>, <code>css</code>, <code>html</code>, <code>json</code>, <code>static asserts(png, svgç­‰ç­‰)</code>ã€‚<code>module_type</code> ä¼šè¢« <code>load</code> æˆ–è€… <code>transform</code> é’©å­è¿”å›</li>
<li><strong>resolved_path å’Œ module_id</strong>ï¼š<code>resolved_path</code> æ˜¯ä¸€ä¸ªæ¨¡å—çš„ç»å¯¹è·¯å¾„ï¼Œ<code>module_id</code>æ˜¯ä¸€ä¸ªæ¨¡å—çš„å”¯ä¸€ idï¼Œé€šå¸¸æ˜¯<code>æ¨¡å—å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„ç›¸å¯¹è·¯å¾„</code> + <code>query</code>ã€‚ä¾‹å¦‚ æˆ‘ä»¬å¼•ç”¨äº†ä¸€ä¸ªæ¨¡å— <code>import &#x27;./a?query&#x27;</code> resolved_path æ˜¯ <code>/project/src/a.ts</code> module_id æ˜¯ <code>src/a.ts?query</code></li>
<li><strong>context</strong>: æ‰€æœ‰çš„æ’ä»¶éƒ½ä¼šæ¥å—ä¸€ä¸ª <code>context</code> å‚æ•°ï¼Œå®ƒæœ‰ Farm é¡¹ç›®çš„æ•´ä¸ªç¼–è¯‘ä¸Šä¸‹æ–‡ï¼Œä½ å¯ä»¥ä»é‡Œé¢æ‹¿åˆ° ModuleGraphï¼ŒModuleï¼ŒResourcesç­‰ç­‰</li>
<li><strong>Resource and Resource Pot</strong>ï¼š<code>Resource</code> æ˜¯è¾“å‡ºå‡ºæ¥çš„æœ€ç»ˆæ‰“åŒ…äº§ç‰©ï¼Œ<code> Resource Pot</code>æ˜¯èµ„æºçš„æŠ½è±¡è¡¨ç¤ºï¼Œç±»ä¼¼äºå…¶ä»–æ‰“åŒ…å™¨çš„ <code>Chunk</code>ã€‚åœ¨ Farm é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä» <code>ModuleGraph</code> ç”Ÿæˆ <code>Resource Pots</code>, æ¸²æŸ“ <code>Resource Pots</code>ï¼Œæœ€ç»ˆä» <code>Resource Pots</code> ç”Ÿæˆ `Resource</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="æ¨¡å—ç±»å‹">æ¨¡å—ç±»å‹<a href="#æ¨¡å—ç±»å‹" class="hash-link" aria-label="æ¨¡å—ç±»å‹çš„ç›´æ¥é“¾æ¥" title="æ¨¡å—ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>åœ¨ Farm ä¸­ï¼Œä¸€åˆ‡éƒ½è¢«è®¤ä¸ºæ˜¯â€œä¸€ç­‰å…¬æ°‘â€ï¼Œå› æ­¤ Farm è®¾è®¡ <code>module_type</code> æ¥æ ‡è¯†æ¨¡å—ç±»å‹ï¼Œå¹¶åœ¨ç”¨ä¸åŒçš„æ’ä»¶å¤„ç†ä¸åŒçš„æ¨¡å—ç±»å‹
<code>Module_type </code>ç”± <code>load</code> é’©å­è¿”å›ï¼Œå¹¶ä¸”å¯ä»¥ç”± <code>transform</code> é’©å­è½¬æ¢ã€‚Farm åŸç”Ÿæ”¯æŒ <code>js/ts/jsx/tsx</code>ã€<code>css</code>ã€<code>html</code>ã€<code>json</code>ã€<code>static assets(pngã€svgç­‰)</code>ã€‚å¯¹äºè¿™äº›æ¨¡å—ç±»å‹ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ <code>load</code> æˆ– <code>transform</code> hook ä¸­è¿”å›ã€‚ä½†æ˜¯å¦‚æœä½ æƒ³å¤„ç†è‡ªå®šä¹‰æ¨¡å—ç±»å‹ï¼Œä½ éœ€è¦å®ç°å…¶ ä»–é’©å­ä¾‹å¦‚ <code>parse</code>ï¼Œ <code>render_resource_pot_modules</code>ï¼Œ <code>generate resources</code> ç­‰æ¥æ§åˆ¶å¦‚ä½•å¯¹è‡ªå®šä¹‰æ¨¡å—è¿›è¡Œç±»å‹è§£æï¼Œæ¸²æŸ“å’Œç”Ÿæˆèµ„æºã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="åˆ›å»ºæ’ä»¶">åˆ›å»ºæ’ä»¶<a href="#åˆ›å»ºæ’ä»¶" class="hash-link" aria-label="åˆ›å»ºæ’ä»¶çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºæ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>Farm æä¾›äº†å®˜æ–¹æ¨¡æ¿æ¥å¸®åŠ©ä½ å¿«é€Ÿåˆ›å»º Rust æ’ä»¶:</p>
<div class="tabs-container tabList_d80c"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_jy3j tabs__item--active">pnpm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_jy3j">npm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_jy3j">yarn</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_MFY6"><div class="codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-text codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">pnpm create farm-plugin</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_MFY6" hidden=""><div class="codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-text codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">npm create farm-plugin@latest</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_MFY6" hidden=""><div class="codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-text codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">yarn create farm-plugin</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>ç„¶åæŒ‰ç…§æç¤ºåˆ›å»ºæ’ä»¶</p>
<p>æˆ–è€…ç›´æ¥è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ’ä»¶:</p>
<div class="tabs-container tabList_d80c"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_jy3j tabs__item--active">pnpm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_jy3j">npm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_jy3j">yarn</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_MFY6"><div class="codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-text codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">pnpm create farm-plugin my-farm-plugin --type rust</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_MFY6" hidden=""><div class="codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-text codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">npm create my-farm-plugin --type rust</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_MFY6" hidden=""><div class="codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-text codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">yarn create my-farm-plugin --type rust</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>ä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º <code>my-farm-plugin</code> çš„jsæ’ä»¶ã€‚<code>â€”â€”type</code> å¯ä»¥æ˜¯ <code>rust</code> æˆ–è€… <code>js</code></p>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="æ’ä»¶é¡¹ç›®ç»“æ„">æ’ä»¶é¡¹ç›®ç»“æ„<a href="#æ’ä»¶é¡¹ç›®ç»“æ„" class="hash-link" aria-label="æ’ä»¶é¡¹ç›®ç»“æ„çš„ç›´æ¥é“¾æ¥" title="æ’ä»¶é¡¹ç›®ç»“æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>ä¸€ä¸ªæ’ä»¶é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="language-plaintext codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-plaintext codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">my-farm-plugin</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”œâ”€â”€ .github</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”‚   â””â”€â”€ workflows</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">|       â”œâ”€â”€ release.yml</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">|       â”œâ”€â”€ build.yml</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”‚       â””â”€â”€ ci.yml</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”œâ”€â”€ Cargo.toml</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">|â”€â”€ .gitignore</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”œâ”€â”€ npm</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”‚   â”œâ”€â”€ darwin-x64</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”‚   â”œâ”€â”€ linux-x64-gnu</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">|   â”œâ”€â”€ win32-x64-msvc</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”‚   â””â”€â”€ ...</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”œâ”€â”€ package.json</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”œâ”€â”€ src</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â”‚   â””â”€â”€ lib.rs</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">â””â”€â”€ rust-toolchain.toml</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å€¼å¾—æ³¨æ„çš„æ–‡ä»¶å’Œç›®å½•:</p>
<ul>
<li><code>src/lib.rs</code>: æ’ä»¶çš„ä¸»è¦æ–‡ä»¶ï¼Œä½ åœ¨è¿™é‡Œå®šä¹‰ä½ çš„æ’ä»¶</li>
<li><code>Cargo.toml</code>: Rust é¡¹ç›®çš„æ¸…å•</li>
<li><code>package.json</code>: npm é¡¹ç›®æ¸…å•</li>
<li><code>npm</code>: å¹³å°ç‰¹å®šçš„äºŒè¿›åˆ¶åŒ…æ‰€åœ¨çš„ä½ç½®ã€‚åœ¨å‘å¸ƒæ’ä»¶ä¹‹å‰ï¼Œè¿™äº›åŒ…åº”è¯¥å‘å¸ƒåˆ° npm registry</li>
<li><code>.github/workflows</code>: ç”¨äºåœ¨ github actions ä¸­äº¤å‰æ„å»ºå’Œå‘å¸ƒæ’ä»¶</li>
<li><code>rust-toolchain.toml</code>: rust å·¥å…·é“¾æ–‡ä»¶ï¼Œå®ƒä¸åº”è¯¥ <strong>è¢«æ‰‹åŠ¨ä¿®æ”¹</strong>ï¼Œå®ƒåº”è¯¥å§‹ç»ˆä½¿ç”¨ <strong>ä¸ farm coreç›¸åŒçš„ç‰ˆæœ¬</strong>ã€‚</li>
</ul>
<p>Farm æä¾›äº†ä¸€ä¸ªå·¥å…· (<code>@farmfe/plugin-tools</code>) æ¥å¸®åŠ©ä½ æ„å»ºå’Œå‘å¸ƒæ’ä»¶ï¼Œå‚è€ƒ <code>package.json</code>:</p>
<div class="language-json codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-json codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">{</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  // ...</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;scripts&quot;: {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    // build your plugin for current platform</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    &quot;build&quot;: &quot;farm-plugin-tools build --platform --cargo-name my_farm_plugin -p my_farm_plugin --release&quot;,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    // publish all platform packages under npm directory to npm registry</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    &quot;prepublishOnly&quot;: &quot;farm-plugin-tools prepublish&quot;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  // ...</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ›´å¤šå…³äºæ„å»ºå’Œå‘å¸ƒçš„ç»†èŠ‚å‚è€ƒ <a href="#cross-build">æ„å»º</a> å’Œ <a href="#publish">å‘å¸ƒ</a>ç« èŠ‚ï¼š</p>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="å¼€å‘æ’ä»¶">å¼€å‘æ’ä»¶<a href="#å¼€å‘æ’ä»¶" class="hash-link" aria-label="å¼€å‘æ’ä»¶çš„ç›´æ¥é“¾æ¥" title="å¼€å‘æ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>ä¸ºäº†åœ¨æœ¬åœ°å¼€å‘å’Œæµ‹è¯•ä½ çš„æ’ä»¶ ä½ é¦–å…ˆä¾æ®ä½ å¹³å°æ„å»ºæ’ä»¶ï¼Œè¿è¡Œï¼š</p>
<div class="language-bash codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-bash codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">pnpm build</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åä½ å¯ä»¥ä½¿ç”¨ä½ æ„å»ºå¥½çš„æ’ä»¶ï¼Œåœ¨ <code>frame.config.ts</code> çš„ <code>plugins</code>æ·»åŠ ä½ çš„æ’ä»¶ï¼š</p>
<div class="language-javascript codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-javascript codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token keyword module" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;@farmfe/core&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword module" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(12, 150, 155)">default</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">defineConfig</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token literal-property property" style="color:rgb(12, 150, 155)">plugins</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;my-farm-plugin&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åœ¨ä½ çš„ farm é¡¹ç›®ä¸­è¿è¡Œ <code>pnpm i</code> å¹¶ä¸”è¿è¡Œ <code>farm start</code> æ¥è¿è¡Œä½ çš„å¸¦æœ‰ä½ æ’ä»¶çš„ farm é¡¹ç›®
å½“å¯¹æ’ä»¶è¿›è¡Œæ›´æ”¹æ—¶ï¼Œåº”è¯¥é‡æ–°æ„å»ºæ’ä»¶å¹¶é‡å¯ farm é¡¹ç›®ä»¥æŸ¥çœ‹æ›´æ”¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½ çš„æ’ä»¶ä¸­æ·»åŠ  <code>load</code> é’©å­:</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockTitle_AzmC">src/lib.rs</div><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ... ignore other code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">str</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;FarmPluginExample&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">load</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookParam</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">std</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">sync</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Arc</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">context</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">CompilationContext</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _hook_context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginHookContext</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">error</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Result</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookResult</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token macro property" style="color:rgb(12, 150, 155)">println!</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;load path: {:?}, id: {:?}&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">resolved_path</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">module_id</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">None</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åç”¨ <code>pnpm build</code> é‡æ–°æ„å»ºä½ çš„æ’ä»¶ï¼Œç”¨ <code>farm start</code> é‡æ–°å¯åŠ¨ä½ çš„ farm é¡¹ç›®ï¼Œä½ ä¼šçœ‹åˆ° <code>load</code> é’©å­åœ¨ç¼–è¯‘ä½ çš„ farm é¡¹ç›®æ—¶è¢«è°ƒç”¨ã€‚</p>
<div class="theme-admonition theme-admonition-note admonition_xFJj alert alert--secondary"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å¤‡æ³¨</div><div class="admonitionContent_JEcN"><p>æƒ³äº†è§£æ›´å¤šå…³äºæ’ä»¶ hooks , å‚é˜… <a href="/zh/docs/api/rust-plugin-api">æ’ä»¶é’©å­</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="å¤„ç†-moduletype">å¤„ç† ModuleType<a href="#å¤„ç†-moduletype" class="hash-link" aria-label="å¤„ç† ModuleTypeçš„ç›´æ¥é“¾æ¥" title="å¤„ç† ModuleTypeçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><code>module_type</code> ç”± <code>load</code> hook æˆ– <code>transform</code> hook è¿”å›ã€‚ä½ åœ¨ <code>load</code> hook ä¸­å¯ä»¥ç»™ module è®¾ç½®ä»»æ„çš„ module typeï¼Œè¯¥æ¨¡å—å°†ç”±æ”¯æŒè¯¥æ¨¡å—ç±»å‹çš„ç›¸åº”æ’ä»¶å¤„ç†ã€‚
å¯¹äºåŸç”Ÿæ”¯æŒçš„æ¨¡å—ç±»å‹ï¼Œä½ å¯ä»¥åœ¨ <code>load</code> é’©å­ä¸­è¿”å›æ¨¡å—ç±»å‹:</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockTitle_AzmC">src/lib.rs</div><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ... ignore other code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">str</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;FarmPluginExample&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">load</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookParam</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">std</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">sync</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Arc</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">context</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">CompilationContext</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _hook_context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginHookContext</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">error</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Result</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookResult</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// handle virtual module</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">module_id</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">starts_with</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;virtual:my-css:css&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// return module type and content</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookResult</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">        module_type</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;css&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">to_string</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        content</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.red { color: red; }&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">to_string</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token class-name" style="color:rgb(17, 17, 17)">Default</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">default</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">None</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¯¹äºåŸç”Ÿæ”¯æŒçš„æ¨¡å—ç±»å‹ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>transform</code> hook å°†æ¨¡å—ç±»å‹è½¬æ¢ä¸ºåŸç”Ÿæ”¯æŒçš„æ¨¡å—ç±»å‹ï¼Œå¦åˆ™ä½ éœ€è¦å®ç° <code>parse</code>ã€<code>renderResourcePot</code> hook æ¥å¤„ç†ä½ çš„è‡ªå®šä¹‰æ¨¡å—ç±»å‹:</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockTitle_AzmC">src/lib.rs</div><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ... ignore other code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">str</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;FarmPluginExample&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">transform</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginTransformHookParam</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">std</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">sync</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Arc</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">context</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">CompilationContext</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _hook_context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginHookContext</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">error</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Result</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginTransformHookResult</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// module type guard is required</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token macro property" style="color:rgb(12, 150, 155)">matches!</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">module_type</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">ModuleType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Custom</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;sass&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// compile sass and transform the module type from sass to css</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginTransformHookResult</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">        module_type</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;css&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">to_string</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        content</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">compileSass</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">content</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token class-name" style="color:rgb(17, 17, 17)">Default</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">default</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">None</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xFJj alert alert--secondary"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å¤‡æ³¨</div><div class="admonitionContent_JEcN"><p>æ¨¡å—ç±»å‹ä¿æŠ¤ï¼Œå¦‚ <code>matches!(module_type, ModuleType::Custom(&quot;sass&quot;))</code> <code>transform</code> é’©å­æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºæ‰€æœ‰æ¨¡å—ç±»å‹éƒ½ä¼šè°ƒç”¨ <code>transform</code> é’©å­ï¼Œå¹¶ä¸”ä½ åº”è¯¥åªåœ¨ <code>transform</code> hook ä¸­å¤„ç†ä½ çš„è‡ªå®šä¹‰æ¨¡å—ç±»å‹ã€‚<code>parse</code>å’Œå…¶ä»– hook ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p></div></div>
<p>æˆ–è€…å®ç° <code>parse</code>ï¼Œ<code>render_resource_pot_modules</code> é’©å­æ¥å¤„ç†ä½ çš„è‡ªå®šä¹‰æ¨¡å—ç±»å‹ å‚è€ƒ farm å¦‚ä½•åŸç”Ÿå¤„ç† css æ’ä»¶å¦‚ä½•å¤„ç† <code>css</code> æ¨¡å—ç±»å‹çš„ <a href="https://github.com/farm-fe/farm/blob/main/crates/plugin_html/src/lib.rs#L159" target="_blank" rel="noopener noreferrer">farm-plugin-css</a></p>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="å¤„ç†æ’ä»¶é€‰é¡¹">å¤„ç†æ’ä»¶é€‰é¡¹<a href="#å¤„ç†æ’ä»¶é€‰é¡¹" class="hash-link" aria-label="å¤„ç†æ’ä»¶é€‰é¡¹çš„ç›´æ¥é“¾æ¥" title="å¤„ç†æ’ä»¶é€‰é¡¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>rust æ’ä»¶é€‰é¡¹å¯ä»¥åœ¨<code>farm.config.ts</code>ä¸­é…ç½®:</p>
<div class="language-javascript codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-javascript codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token keyword module" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;@farmfe/core&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword module" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(12, 150, 155)">default</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">defineConfig</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token literal-property property" style="color:rgb(12, 150, 155)">plugins</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;my-farm-plugin&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// plugin options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token literal-property property" style="color:rgb(12, 150, 155)">myOption</span><span class="token operator" style="color:rgb(12, 150, 155)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;myOption&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¯¥é€‰é¡¹å°†è¢« json åºåˆ—åŒ–å¹¶ä¼ é€’ç»™æ’ä»¶çš„<code>new</code>æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨<code>new</code>æ–¹æ³•ä¸­å¤„ç†è¯¥é€‰é¡¹:</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockTitle_AzmC">src/lib.rs</div><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ... ignore other code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// define your rust plugin options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(72, 118, 214);font-style:italic">#[derive(serde::Deserialize)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:rgb(17, 17, 17)">Options</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">pub</span><span class="token plain"> my_option</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">new</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// deserialize the options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> my_option</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Options</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">serde_json</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">from_str</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">unwrap</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// handle the options...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¯·æ³¨æ„ï¼Œä½ åº”è¯¥å°†ä¾èµ– <code>serde</code> å’Œ <code>serde_json</code> æ·»åŠ åˆ°ä½ çš„<code>Cargo.toml</code>ä¸­ã€‚æ¥æ”¯æŒååºåˆ—åŒ–:</p>
<div class="language-toml codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-toml codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"># ... ignore other code</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">serde = { version = &quot;1.0&quot;, features = [&quot;derive&quot;] }</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">serde_json = &quot;1.0&quot;</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xFJj alert alert--secondary"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å¤‡æ³¨</div><div class="admonitionContent_JEcN"><p>ä¸èƒ½è¢« json åºåˆ—åŒ–é€‰é¡¹ä¸è¢«æ”¯æŒã€‚è¿™æ„å‘³ç€ä½ åªèƒ½ä½¿ç”¨å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ•°ç»„ã€å¯¹è±¡ç­‰ç±»å‹ã€‚ä¸æ”¯æŒ<code>å‡½æ•°é€‰é¡¹</code>ã€‚</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="åœ¨æ’ä»¶é‡Œé¢ä½¿ç”¨-farm_core">åœ¨æ’ä»¶é‡Œé¢ä½¿ç”¨ farm_core<a href="#åœ¨æ’ä»¶é‡Œé¢ä½¿ç”¨-farm_core" class="hash-link" aria-label="åœ¨æ’ä»¶é‡Œé¢ä½¿ç”¨ farm_coreçš„ç›´æ¥é“¾æ¥" title="åœ¨æ’ä»¶é‡Œé¢ä½¿ç”¨ farm_coreçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>Farm åœ¨ <a href="https://docs.rs/farmfe_core" target="_blank" rel="noopener noreferrer"><code>farmfe_core</code></a> crate ä¸­æš´éœ²æ‰€æœ‰æ ¸å¿ƒç»“æ„å’Œå·¥å…·å‡½æ•°ã€‚æ›´å¤šç»†èŠ‚è¯·å‚é˜…<a href="https://docs.rs/farmfe_core" target="_blank" rel="noopener noreferrer"><code>farmfe_core</code></a>æ–‡æ¡£ã€‚</p>
<div class="theme-admonition theme-admonition-note admonition_xFJj alert alert--secondary"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å¤‡æ³¨</div><div class="admonitionContent_JEcN"><p>å¦‚æœä½ æƒ³åœ¨æ’ä»¶ä¸­ä½¿ç”¨ swc ä¸­çš„ <code>Module</code>ã€<code>Program</code> ç­‰ç»“æ„ï¼Œä½ åº”è¯¥ä½¿ç”¨ç”± farm_core é‡æ–°æš´éœ²çš„ <code>farmfe_core::swc_ast</code>ã€‚å› ä¸º farm_core ä½¿ç”¨çš„ swc ç‰ˆæœ¬å¯èƒ½ä¸ä½ åœ¨æ’ä»¶ä¸­ä½¿ç”¨çš„ swc ç‰ˆæœ¬ä¸åŒï¼Œå¹¶ä¸” farm_core ä½¿ç”¨çš„ swc ç‰ˆæœ¬ä¿è¯ä¸ farm_core å…¼å®¹ã€‚</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="è­¦å‘Š">è­¦å‘Š<a href="#è­¦å‘Š" class="hash-link" aria-label="è­¦å‘Šçš„ç›´æ¥é“¾æ¥" title="è­¦å‘Šçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_PvKQ" id="åœ¨æ’ä»¶ä¸­ä½¿ç”¨-swc">åœ¨æ’ä»¶ä¸­ä½¿ç”¨ SWC<a href="#åœ¨æ’ä»¶ä¸­ä½¿ç”¨-swc" class="hash-link" aria-label="åœ¨æ’ä»¶ä¸­ä½¿ç”¨ SWCçš„ç›´æ¥é“¾æ¥" title="åœ¨æ’ä»¶ä¸­ä½¿ç”¨ SWCçš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>è¯·æ³¨æ„ï¼Œä½ çš„ rust æ’ä»¶ä¸åº”è¯¥ä½¿ç”¨ä»»ä½•ä¸ SWC ç›¸å…³çš„åŒ…ï¼Œå¦‚<code>swc_common</code>ã€<code>swc_transforms</code>ç­‰ã€‚SWC åœ¨è¿›ç¨‹ä¸­å­˜å‚¨å…¨å±€çŠ¶æ€ï¼Œå½“ä½ åœ¨æ’ä»¶ä¸­ä½¿ç”¨ SWC æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´<strong>æ­»é”</strong>ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦ä¿®æ”¹ä½ çš„ Farm é¡¹ç›®çš„ASTï¼Œå»ºè®®å†™[SWC Plugin](/zh/docs/using-plugins#using-swc plugins)ã€‚å…³äºå¦‚ä½•ç¼–å†™SWCæ’ä»¶ï¼Œè¯·å‚é˜…<a href="https://swc.rs/docs/plugin/ecmascript/getting-started" target="_blank" rel="noopener noreferrer">ç¼–å†™SWCæ’ä»¶</a>ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_PvKQ" id="é€‰æ‹©-rust-å·¥å…·é“¾">é€‰æ‹© Rust å·¥å…·é“¾<a href="#é€‰æ‹©-rust-å·¥å…·é“¾" class="hash-link" aria-label="é€‰æ‹© Rust å·¥å…·é“¾çš„ç›´æ¥é“¾æ¥" title="é€‰æ‹© Rust å·¥å…·é“¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>å› ä¸º Farm çš„ Rust æ’ä»¶æ˜¯ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œä½ åº”è¯¥å§‹ç»ˆä½¿ç”¨å’Œ farm core ç›¸åŒç‰ˆæœ¬çš„ Rust å·¥å…·é“¾ã€‚rust å·¥å…·é“¾å®šä¹‰åœ¨<code> rust-toolchain.toml</code>ä¸­ã€‚å®ƒä¸åº”è¯¥<strong>è¢«æ‰‹åŠ¨ä¿®æ”¹</strong>ã€‚
å¹¶ä¸”åº”è¯¥å§‹ç»ˆä½¿ç”¨ Rust æ„å»ºæ’ä»¶ï¼Œå› ä¸ºFarm Core ä¸æ”¯æŒ FFIï¼Œä¹Ÿä¸æ‰¿è¯º ABI ç¨³å®šæ€§ä»¥æä¾›æœ€ä½³æ€§èƒ½ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="æ’ä»¶çš„å…¼å®¹æ€§">æ’ä»¶çš„å…¼å®¹æ€§<a href="#æ’ä»¶çš„å…¼å®¹æ€§" class="hash-link" aria-label="æ’ä»¶çš„å…¼å®¹æ€§çš„ç›´æ¥é“¾æ¥" title="æ’ä»¶çš„å…¼å®¹æ€§çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>Farm core ç»´æŠ¤äº†ä¸€ä¸ªå‘æ’ä»¶æš´æ¼å‡ºæ¥ä¸€ä¸ª API ç‰ˆæœ¬ã€‚å¦‚æœä½ é‡åˆ°ç±»ä¼¼<code>Incompatible Rust Plugin: Current core&#x27;s versionâ€¦</code>ï¼Œè¿™æ„å‘³ç€ä½ çš„æ’ä»¶ä¸å½“å‰ farm coreç‰ˆæœ¬ä¸å…¼å®¹ã€‚ä½ åº”è¯¥æ›´æ–°ä½ çš„æ’ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å¯¹äºæ’ä»¶ä½œè€…æ¥è¯´ï¼Œä½ åº”è¯¥é‡æ–°ç”¨æœ€æ–°çš„ farm core ç‰ˆæœ¬æ„å»ºå’Œå‘å¸ƒæ’ä»¶ï¼Œæ¥è®©ä½ çš„æ’ä»¶ä¸æœ€æ–°çš„ farm coreç‰ˆæœ¬å…¼å®¹ã€‚</p>
<div class="theme-admonition theme-admonition-note admonition_xFJj alert alert--secondary"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å¤‡æ³¨</div><div class="admonitionContent_JEcN"><p>Farm æ‰¿è¯ºä¸ç›¸åŒä¸»ç‰ˆæœ¬çš„ AP Iå…¼å®¹ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æ’ä»¶å…¼å®¹ Farm core 1.0.0ï¼Œé‚£ä¹ˆå®ƒä¹Ÿåº”è¯¥å…¼å®¹ Farm core 1.1.0ã€1.2.0ç­‰ï¼Œè¿™æ„å‘³ç€ä½ çš„æ’ä»¶å°†å§‹ç»ˆé€‚ç”¨äºç›¸åŒçš„ Farm ä¸»ç‰ˆæœ¬ã€‚</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="äº¤å‰æ„å»º">äº¤å‰æ„å»º<a href="#äº¤å‰æ„å»º" class="hash-link" aria-label="äº¤å‰æ„å»ºçš„ç›´æ¥é“¾æ¥" title="äº¤å‰æ„å»ºçš„ç›´  æ¥é“¾æ¥">â€‹</a></h2>
<p>ä¸€ä¸ª Farm Rust æ’ä»¶æ˜¯ä¸€ä¸ª<strong>ç‰¹å®šäºå¹³å°çš„åŠ¨æ€é“¾æ¥åº“</strong>ï¼Œä½ åº”è¯¥ä¸ºä½ æƒ³è¦æ”¯æŒçš„æ‰€æœ‰å¹³å°æ„å»ºæ’ä»¶ã€‚
Farm æä¾›äº†ä¸€ä¸ªä½¿ç”¨ github actions æ„å»ºæ’ä»¶çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜…<a href="https://github.com/farm-fe/rust-plugin-example/blob/main/.github/workflows/build.yaml" target="_blank" rel="noopener noreferrer">.github/workflows/build.yml</a></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œfarm rust æ’ä»¶åº”è¯¥é’ˆå¯¹ä»¥ä¸‹å¹³å°æ„å»º:</p>
<ul>
<li><code>linux-x64-gnu </code></li>
<li><code>linux-x64-musl</code></li>
<li><code>darwin-x64</code></li>
<li><code>win32-x64-msvc</code></li>
<li><code>linux-arm64-musl</code></li>
<li><code>linux-arm64-gnu</code></li>
<li><code>darwin-arm64</code></li>
<li><code>win32-ia32-msvc</code></li>
<li><code>win32-arm64-msvc</code></li>
</ul>
<p>å¯¹äºå…¬å¼€å‘å¸ƒåˆ° npm registry çš„æ’ä»¶ï¼Œå»ºè®®å‘å¸ƒæ”¯æŒä¸Šé¢æ‰€æœ‰å¹³å°çš„æ’ä»¶ã€‚å¯¹äºç§æœ‰ rust æ’ä»¶ï¼Œä½ å¯ä»¥ä¸ºä»»ä½•ä½ æƒ³æ”¯æŒçš„å¹³å°æ„å»ºæ’ä»¶ã€‚</p>
<div class="theme-admonition theme-admonition-tip admonition_xFJj alert alert--success"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</div><div class="admonitionContent_JEcN"><p>å› ä¸º rust æ’ä»¶æ˜¯ä¸€ä¸ªçº¯åŠ¨æ€é“¾æ¥åº“ï¼Œå¦‚æœæ‚¨æœ‰å…³äºå¦‚ä½•ä¸ºç‰¹å®šå¹³å°æ„å»ºæ’ä»¶çš„é—®é¢˜ï¼Œåªéœ€è°·æ­Œå¦‚ä½•åœ¨ rust ä¸­ä¸ºè¯¥å¹³å°æ„å»ºåŠ¨æ€é“¾æ¥åº“ã€‚</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="å‘å¸ƒ">å‘å¸ƒ<a href="#å‘å¸ƒ" class="hash-link" aria-label="å‘å¸ƒçš„ç›´æ¥é“¾æ¥" title="å‘å¸ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å‘å¸ƒ Rustæ’ä»¶çš„æœ‰ä»¥ä¸‹çš„æ­¥éª¤:</p>
<ol>
<li>äº¤å‰æ„å»ºåŠ¨æ€é“¾æ¥åº“çš„ Rust æ’ä»¶ï¼Œè¯¦æƒ…è¯·å‚é˜…<a href="#cross-build">äº¤å‰æ„å»º</a></li>
<li>å°†äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ° npm ç›®å½•ä¸‹ï¼Œä¾‹å¦‚:å¤åˆ¶åˆ° <code>npm/linux-x64-gnu/index.farm</code></li>
<li>åœ¨ npm ç›®å½•ä¸‹å‘å¸ƒå¹³å°ç‰¹å®šçš„åŒ…ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>farm-plugin-tool prepublish</code>åœ¨ npm ç›®å½•ä¸‹å‘å¸ƒåŒ…</li>
<li>å‘å¸ƒåŒ…æœ¬èº«</li>
</ol>
<p>å‚è§ç¤ºä¾‹<a href="https://github.com/farm-fe/rust-plugin-example/blob/main/.github/workflows/release.yml" target="_blank" rel="noopener noreferrer">github actions publish workflow</a></p>
<h2 class="anchor anchorWithStickyNavbar_PvKQ" id="ä¾‹å­">ä¾‹å­<a href="#ä¾‹å­" class="hash-link" aria-label="ä¾‹å­çš„ç›´æ¥é“¾æ¥" title="ä¾‹å­çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ <code>@farmfe/plugin-sass</code> ä½œä¸ºä¸€ä¸ªçœŸæ­£çš„ Rust æ’ä»¶ç¤ºä¾‹ã€‚è¿™ä¸ªæ’ä»¶å°†æ”¯æŒåœ¨ä½ çš„é¡¹ç›®ä¸­ç¼–è¯‘<code>.scss</code> å’Œ <code>.sass</code> æ–‡ä»¶</p>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="å®šä¹‰ä¸€ä¸ªæ’ä»¶">å®šä¹‰ä¸€ä¸ªæ’ä»¶<a href="#å®šä¹‰ä¸€ä¸ªæ’ä»¶" class="hash-link" aria-label="å®šä¹‰ä¸€ä¸ªæ’ä»¶çš„ç›´æ¥é“¾æ¥" title="å®šä¹‰ä¸€ä¸ªæ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯¼å‡ºä¸€ä¸ªåä¸º <code>FarmPluginSass</code> çš„ Rust struct</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockTitle_AzmC">src/lib.rs</div><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">use</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_macro_plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token plain">farm_plugin</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// 1. define a struct with #[farm_plugin] attribute</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(72, 118, 214);font-style:italic">#[farm_plugin]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:rgb(17, 17, 17)">FarmPluginSass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  sass_options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginSass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// 2. define a new method with 2 arguments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">new</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">_config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      sass_options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">new</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">r#&quot;\.(sass|scss)$&quot;#</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">unwrap</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>struct å¿…é¡»æ˜¯<code>pub</code>å¹¶ä¸”å¿…é¡»æœ‰ <code>#[farm_plugin]</code> å±æ€§ã€‚</li>
<li>ç»“æ„ä½“å¿…é¡»å¯¼å‡ºä¸€ä¸ª<code>new</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ä½œä¸ºåˆå§‹åŒ–å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>&amp;Config</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>String</code>ã€‚</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="å®ç°æ’ä»¶-trait">å®ç°æ’ä»¶ Trait<a href="#å®ç°æ’ä»¶-trait" class="hash-link" aria-label="å®ç°æ’ä»¶ Traitçš„ç›´æ¥é“¾æ¥" title="å®ç°æ’ä»¶ Traitçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><code>Plugin</code> trait ç”¨äºå®šä¹‰å¯ä»¥æŒ‚æ¥åˆ° farm compiler çš„ <code>hooks</code></p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">use</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">use</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_macro_plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token plain">farm_plugin</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// 1. define a struct with #[farm_plugin] attribute</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(72, 118, 214);font-style:italic">#[farm_plugin]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:rgb(17, 17, 17)">FarmPluginSass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  sass_options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginSass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// 2. define a new method with 2 arguments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">new</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">_config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      sass_options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">new</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">r#&quot;\.(sass|scss)$&quot;#</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">unwrap</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Implement Plugin Trait</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginSass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">str</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;FarmPluginSass&quot;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// this plugin should be executed before internal plugins</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">priority</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token number" style="color:rgb(170, 9, 130)">101</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="åŠ è½½-scss-æ–‡ä»¶">åŠ è½½ <code>.scss</code> æ–‡ä»¶<a href="#åŠ è½½-scss-æ–‡ä»¶" class="hash-link" aria-label="åŠ è½½-scss-æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="åŠ è½½-scss-æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å®ç° <code>load</code> é’©å­ä»¥æ”¯æŒåŠ è½½<code> .scss</code> æ–‡ä»¶</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ignore other code ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// Implement Plugin Trait</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Plugin</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">FarmPluginSass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">str</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;FarmPluginSass&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// this plugin should be executed before internal plugins</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">priority</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token number" style="color:rgb(170, 9, 130)">101</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">load</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookParam</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">std</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">sync</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Arc</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">context</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">CompilationContext</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    _hook_context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginHookContext</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">error</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Result</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookResult</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">is_empty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;&amp;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">regex</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">is_match</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">resolved_path</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> content </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">fs</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">read_file_utf8</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">resolved_path</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">content</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> content </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginLoadHookResult</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">          content</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">          module_type</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">ModuleType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Custom</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">from</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;sass&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">    </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">None</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åœ¨ <code>load</code> é’©å­ä¸­ï¼Œæˆ‘ä»¬åªè¯»å–ä»¥<code>.scss</code> æˆ–è€… <code>.sass</code>ç»“å°¾çš„æ–‡ä»¶,è¿”å›æ–‡ä»¶å†…å®¹å¹¶å°†å…¶ module_type è®¾ç½®ä¸º<code>ModuleType::Custom(String::from(&quot;sass&quot;))</code>ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_PvKQ" id="è½¬åŒ–-sass-æ–‡ä»¶">è½¬åŒ– <code>sass</code> æ–‡ä»¶<a href="#è½¬åŒ–-sass-æ–‡ä»¶" class="hash-link" aria-label="è½¬åŒ–-sass-æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="è½¬åŒ–-sass-æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>åŠ è½½ <code>.scss</code> æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>transform</code> hook ä¸­å°†å…¶è½¬æ¢ä¸º <code>css</code>ï¼Œç„¶å Farm å°†åœ¨æ¥ä¸‹æ¥çš„è¿‡ç¨‹ä¸­å°†å…¶è§†ä¸º css</p>
<div class="language-rust codeBlockContainer_qe3H theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_ZwF_"><pre tabindex="0" class="prism-code language-rust codeBlock_yx9A thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_rBco"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ignore other code ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(153, 76, 195);font-style:italic">transform</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginTransformHookParam</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token namespace" style="color:rgb(12, 150, 155)">std</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">sync</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Arc</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">context</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">CompilationContext</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">error</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Result</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginTransformHookResult</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// module type guard is neccessary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">module_type </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">ModuleType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Custom</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">String</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">from</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;sass&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ... ignore other code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// parse options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> options </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">parse_options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">module_id</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// compile sass to css</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> compile_result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">compileSass</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain">param</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">content</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">plugin</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">PluginTransformHookResult</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      content</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> compile_result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">css</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      source_map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> compile_result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">source_map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// tell farm compiler that we have transformed this module to css</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      module_type</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token namespace" style="color:rgb(12, 150, 155)">farmfe_core</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token namespace" style="color:rgb(12, 150, 155)">module</span><span class="token namespace punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">ModuleType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Css</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      ignore_previous_source_map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">None</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup_Xkfi"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_Octo" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Neix"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_zpYU"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xFJj alert alert--success"><div class="admonitionHeading_Oflq"><span class="admonitionIcon_h6Ed"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</div><div class="admonitionContent_JEcN"><p>è¿™ä¸ªä¾‹å­åªä»‹ç»äº†å¦‚ä½•å®ç°è½¬æ¢å™¨ã€‚æœ‰å…³ Farm æ”¯æŒçš„æ›´å¤šèƒ½åŠ›ï¼Œè¯·å‚é˜…<a href="/zh/docs/api/rust-plugin-api">æ’ä»¶é’©å­</a>ã€‚</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/farm-fe/farm-fe.github.io/tree/main/docs/plugins/writing-plugins/rust-plugin.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_yNcj" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_MpL1"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/plugins/writing-plugins/overview"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">æ¦‚è§ˆ</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/docs/plugins/writing-plugins/js-plugin"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">ç¼–å†™ JavaScript æ’ä»¶</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_C8Wg thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#çº¦å®š" class="table-of-contents__link toc-highlight">çº¦å®š</a></li><li><a href="#æ¦‚å¿µ" class="table-of-contents__link toc-highlight">æ¦‚å¿µ</a><ul><li><a href="#æ¨¡å—ç±»å‹" class="table-of-contents__link toc-highlight">æ¨¡å—ç±»å‹</a></li></ul></li><li><a href="#åˆ›å»ºæ’ä»¶" class="table-of-contents__link toc-highlight">åˆ›å»ºæ’ä»¶</a></li><li><a href="#æ’ä»¶é¡¹ç›®ç»“æ„" class="table-of-contents__link toc-highlight">æ’ä»¶é¡¹ç›®ç»“æ„</a></li><li><a href="#å¼€å‘æ’ä»¶" class="table-of-contents__link toc-highlight">å¼€å‘æ’ä»¶</a><ul><li><a href="#å¤„ç†-moduletype" class="table-of-contents__link toc-highlight">å¤„ç† ModuleType</a></li><li><a href="#å¤„ç†æ’ä»¶é€‰é¡¹" class="table-of-contents__link toc-highlight">å¤„ç†æ’ä»¶é€‰é¡¹</a></li><li><a href="#åœ¨æ’ä»¶é‡Œé¢ä½¿ç”¨-farm_core" class="table-of-contents__link toc-highlight">åœ¨æ’ä»¶é‡Œé¢ä½¿ç”¨ farm_core</a></li><li><a href="#è­¦å‘Š" class="table-of-contents__link toc-highlight">è­¦å‘Š</a></li><li><a href="#æ’ä»¶çš„å…¼å®¹æ€§" class="table-of-contents__link toc-highlight">æ’ä»¶çš„å…¼å®¹æ€§</a></li></ul></li><li><a href="#äº¤å‰æ„å»º" class="table-of-contents__link toc-highlight">äº¤å‰æ„å»º</a></li><li><a href="#å‘å¸ƒ" class="table-of-contents__link toc-highlight">å‘å¸ƒ</a></li><li><a href="#ä¾‹å­" class="table-of-contents__link toc-highlight">ä¾‹å­</a><ul><li><a href="#å®šä¹‰ä¸€ä¸ªæ’ä»¶" class="table-of-contents__link toc-highlight">å®šä¹‰ä¸€ä¸ªæ’ä»¶</a></li><li><a href="#å®ç°æ’ä»¶-trait" class="table-of-contents__link toc-highlight">å®ç°æ’ä»¶ Trait</a></li><li><a href="#åŠ è½½-scss-æ–‡ä»¶" class="table-of-contents__link toc-highlight">åŠ è½½ <code>.scss</code> æ–‡ä»¶</a></li><li><a href="#è½¬åŒ–-sass-æ–‡ä»¶" class="table-of-contents__link toc-highlight">è½¬åŒ– <code>sass</code> æ–‡ä»¶</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Guide</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/quick-start">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/why-farm">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/farm-fe/farm#chat-with-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.com/invite/mDErq9aFnF" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/farm-fe/farm" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/@farm-fe" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hqIV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://github.com/farm-fe/farm" rel="noopener noreferrer" class="footerLogoLink_yggd"><img src="/zh/img/logo-farm.png" alt="Farm Logo" class="footer__logo themedComponent_xQWO themedComponent--light_Flgq"><img src="/zh/img/logo-farm.png" alt="Farm Logo" class="footer__logo themedComponent_xQWO themedComponent--dark_Lh1h"></a></div><div class="footer__copyright">Copyright Â© 2023 Farm, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>